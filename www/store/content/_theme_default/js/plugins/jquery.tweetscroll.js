/*
 * TweetScroll jQuery Plugin
 * Author: Pixel Industry
 * Author URL : http://pixel-industry.com
 * Version: 1.2.6
 *
 * jQuery plugin to load latest Twitter tweets.
 *
 * Modified for Maian Cart by MSWorld
*/
!function(e){e.fn.tweetscroll=function(t){function a(t){var a=new Date,i=new Date(t);e.browser.msie&&(i=Date.parse(t.replace(/( \+)/," UTC$1")));var s=a-i,r=1e3,n=60*r,l=60*n,o=24*l;return isNaN(s)||0>s?"":2*r>s?"right now":n>s?Math.floor(s/r)+" seconds ago":2*n>s?"about 1 minute ago":l>s?Math.floor(s/n)+" minutes ago":2*l>s?"about 1 hour ago":o>s?Math.floor(s/l)+" hours ago":s>o&&2*o>s?"yesterday":365*o>s?Math.floor(s/o)+" days ago":"over a year ago"}function i(t,i){var s,r="",n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=["January","February","March","April","May","June","July","August","Septemper","October","November","December"];return e.each(t,function(t,o){var p=o.user.profile_image_url;if(0==t&&(s=e('<ul class="tweet-list">'),i.logo&&s.addClass("twitter-logo")),i.replies===!1?null===o.in_reply_to_status_id&&(i.profile_image?s.append('<li class="profile-image tweet_content_'+t+'" style="background: url('+p+') no-repeat left top;"><p class="tweet_link_'+t+'">'+o.text.replace(/#(.*?)(\s|$)/g,'<span class="hash">#$1 </span>').replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$&">$&</a> ').replace(/@(.*?)(\s|\(|\)|$)/g,'<a href="http://twitter.com/$1">@$1 </a>$2')+"</p></li>"):s.append('<li class="tweet_content_'+t+'"><p class="tweet_link_'+t+'">'+o.text.replace(/#(.*?)(\s|$)/g,'<span class="hash">#$1 </span>').replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$&">$&</a> ').replace(/@(.*?)(\s|\(|\)|$)/g,'<a href="http://twitter.com/$1">@$1 </a>$2')+"</p></li>")):i.profile_image?s.append('<li class="profile-image tweet_content_'+t+'" style="background: url('+p+') no-repeat left top;"><p class="tweet_link_'+t+'">'+o.text.replace(/#(.*?)(\s|$)/g,'<span class="hash">#$1 </span>').replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$&">$&</a> ').replace(/@(.*?)(\s|\(|\)|$)/g,'<a href="http://twitter.com/$1">@$1 </a>$2')+"</p></li>"):s.append('<li class="tweet_content_'+t+'"><p class="tweet_link_'+t+'">'+o.text.replace(/#(.*?)(\s|$)/g,'<span class="hash">#$1 </span>').replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$&">$&</a> ').replace(/@(.*?)(\s|\(|\)|$)/g,'<a href="http://twitter.com/$1">@$1 </a>$2')+"</p></li>"),1==i.time){var c=jQuery.inArray(o.created_at.substr(4,3),n);"style1"==i.date_format?(r=c+1,10>r&&(r="0"+r),s.find(".tweet_link_"+t).append("<small> "+o.created_at.substr(8,2)+"/"+r+"/"+o.created_at.substr(26,4)+" "+o.created_at.substr(11,8)+"</small>")):"style2"==i.date_format?(r=l[c],s.find(".tweet_link_"+t).append("<small> "+r+" "+o.created_at.substr(8,2)+", "+o.created_at.substr(26,4)+" "+o.created_at.substr(11,8)+"</small>")):(relativeTime=a(o.created_at),s.find(".tweet_link_"+t).append("<small> "+relativeTime+"</small>"))}}),"slide_down"==i.animation&&s.find("li").each(function(){e(this).prependTo(e(this).parent())}),1==i.url_new_window&&s.find("a").each(function(){e(this).attr({target:"_BLANK"})}),s}var s={limit:5,visible_tweets:2,speed:600,delay:5e3,username:"",time:!0,replies:!1,date_format:"style2",animation:"slide_up",url_new_window:!0,request_url:"twitter/tweets.php",logo:!1,profile_image:!1},r=e.extend({},s,t);return isNaN(r.speed)&&(r.speed=600),isNaN(r.delay)&&(r.delay=3e3),r.instance_id=e(this).attr("data-instance-id"),r.instance_id||(r.instance_id=""),r.action="pi_tweetscroll_ajax",this.each(function(t){function a(t){var i=r.speed;switch(r.animation){case"slide_down":for(var s=t.find("li").outerHeight(),n=0,l=r.visible_tweets,o=1;l>o;o++){var p=t.find("li:nth-child("+o+")");n+=e(p).outerHeight()}var c=parseInt(t.find("li:last").outerHeight());n+=c,t.parent().css({height:n}),t.animate({bottom:-c},i,"linear",function(){t.find("li:first").before(t.find("li:last")),t.css({bottom:0}),window.setTimeout(function(){a(t)},r.delay)});break;case"slide_up":for(var s=t.find("li").outerHeight(),n=0,l=r.visible_tweets+2,o=2;l>o;o++){var p=t.find("li:nth-child("+o+")");n+=e(p).outerHeight()}t.parent().css({height:n}),t.animate({top:-s},i,"linear",function(){t.find("li:last").after(t.find("li:first")),t.css({top:0}),window.setTimeout(function(){a(t)},r.delay)});break;case"fade":var s=t.outerHeight(),n=0;parseInt(t.css("top"))+s;t.animate({opacity:0},i,"linear",function(){var i=t.find("li:lt("+r.visible_tweets+")");t.find("li:last").after(e(i));for(var s=1;s<=r.visible_tweets;s++){var l=t.find("li:nth-child("+s+")");n+=e(l).outerHeight()}t.parent().css({height:parseInt(n+20)}),t.animate({opacity:1}),window.setTimeout(function(){a(t)},r.delay)})}}function s(t){var a=0;if("slide_down"==r.animation){for(var i=r.visible_tweets+1,s=1;i>s;s++){var n=t.find("li:nth-child("+s+")");a+=e(n).outerHeight()}t.parent().css({height:a}),t.css({bottom:0})}else if("slide_up"==r.animation){for(var i=r.visible_tweets+1,s=1;i>s;s++){var n=t.find("li:nth-child("+s+")");a+=e(n).outerHeight()}t.parent().css({height:a})}else if("fade"==r.animation){for(var i=r.visible_tweets+1,s=1;i>s;s++){var n=t.find("li:nth-child("+s+")");a+=e(n).outerHeight()}t.parent().css({height:parseInt(a+20)}),jQuery("#mc_ltweets").removeClass("rss_spinner")}}var n,l=e(this);if("undefined"==typeof PiTweetScroll)var o=r.request_url;else var o=PiTweetScroll.ajaxrequests;0==r.animation&&(r.limit=r.visible_tweets),e.getJSON(o,r,function(t){n=i(t,r),e(n).appendTo(l),s(n),setTimeout(function(){a(n)},r.delay)})})}}(jQuery);